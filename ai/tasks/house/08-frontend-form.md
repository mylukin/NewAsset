---
id: house.frontend-form
module: house
priority: 17
status: passing
version: 24
origin: manual
dependsOn:
  - house.frontend-api
supersedes: []
tags:
  - frontend
  - vue
  - p0
testRequirements:
  unit:
    required: false
    pattern: tests/house/**/*.test.*
verification:
  verifiedAt: '2025-12-14T12:27:20.365Z'
  verdict: pass
  verifiedBy: strategy-framework
  commitHash: aad2a724073dea6552c987edcdc1db54253da5bd
  summary: 7/7 criteria satisfied
tddGuidance:
  generatedAt: '2025-12-14T12:25:53.945Z'
  generatedBy: claude
  forVersion: 21
  suggestedTestFiles:
    unit:
      - src/test/java/com/newasset/house/HouseAssetFormTest.java
    e2e:
      - e2e/house/asset-form.spec.ts
  unitTestCases:
    - name: shouldRenderFormDialogComponent
      assertions:
        - assertNotNull(formDialog)
        - assertTrue(formDialog.isVisible())
    - name: shouldGroupFormFieldsByCategory
      assertions:
        - 'assertEquals(expectedCategories, formDialog.getFieldCategories())'
        - assertTrue(formDialog.hasFieldGroup('basicInfo'))
        - assertTrue(formDialog.hasFieldGroup('location'))
        - assertTrue(formDialog.hasFieldGroup('financial'))
    - name: shouldDisplayAutoGeneratedAssetCodeAsReadOnly
      assertions:
        - assertTrue(assetCodeField.isReadOnly())
        - assertNotNull(assetCodeField.getValue())
        - 'assertEquals(expectedGeneratedCode, assetCodeField.getValue())'
    - name: shouldValidateRequiredFields
      assertions:
        - assertFalse(form.isValid())
        - >-
          assertTrue(form.getValidationErrors().contains('projectId is
          required'))
        - >-
          assertTrue(form.getValidationErrors().contains('assetType is
          required'))
    - name: shouldSupportAddMode
      assertions:
        - 'assertEquals(''add'', formDialog.getMode())'
        - assertTrue(formDialog.getFormData().isEmpty())
        - 'assertEquals(''新增资产'', formDialog.getTitle())'
    - name: shouldSupportEditMode
      assertions:
        - 'assertEquals(''edit'', formDialog.getMode())'
        - >-
          assertEquals(existingAsset.getName(),
          formDialog.getFormData().get('name'))
        - 'assertEquals(''编辑资产'', formDialog.getTitle())'
    - name: shouldShowLoadingStateOnSubmission
      assertions:
        - assertTrue(submitButton.isLoading())
        - assertTrue(submitButton.isDisabled())
        - assertFalse(form.isEditable())
    - name: shouldResetFormOnDialogClose
      assertions:
        - assertTrue(formDialog.getFormData().isEmpty())
        - assertFalse(formDialog.hasValidationErrors())
        - assertNull(formDialog.getSelectedProject())
  e2eScenarios:
    - name: user opens add asset dialog and sees empty form
      steps:
        - navigate to house asset list page
        - click add asset button
        - verify dialog opens with empty form fields
        - verify asset code field is empty and read-only
    - name: user fills form and sees auto-generated asset code
      steps:
        - open add asset dialog
        - select project from dropdown
        - select asset type
        - verify asset code is auto-generated and displayed
        - verify asset code field is read-only
    - name: user submits form with validation errors
      steps:
        - open add asset dialog
        - leave required fields empty
        - click submit button
        - verify validation error messages appear
        - verify form is not submitted
    - name: user successfully creates new asset
      steps:
        - open add asset dialog
        - fill all required fields
        - click submit button
        - verify loading state is shown
        - verify success message appears
        - verify dialog closes
        - verify new asset appears in list
    - name: user edits existing asset
      steps:
        - click edit button on existing asset row
        - verify dialog opens with pre-filled data
        - modify asset name
        - click submit button
        - verify loading state is shown
        - verify success message appears
        - verify updated data in list
    - name: user cancels form and data is reset
      steps:
        - open add asset dialog
        - fill some form fields
        - click cancel or close button
        - reopen add asset dialog
        - verify form fields are empty
  frameworkHint: surefire
---
# Create House Asset Form Dialog

## Context

Vue dialog component for creating and editing house assets with form validation.

## Acceptance Criteria

1. Create form dialog component (inline in index.vue or separate)
2. Implement form fields grouped by category:
3. Show auto-generated asset code (read-only) after selecting project/type
4. Add form validation rules for required fields
5. Support both add and edit modes
6. Handle form submission with loading state
7. Reset form on dialog close
## Technical Notes

- Reference: PRD Section 6.2.2
- Pattern: el-dialog with el-form
- Validation: Use element-ui form rules
